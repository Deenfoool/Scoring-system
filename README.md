# Инструкция по использованию программы Scoring system

Этот документ описывает, как использовать программу `Scoring system`, написанную на Python с графическим интерфейсом (GUI) `tkinter`.

## Назначение

Программа предназначена для:

1.  **Управления ссылками** на различные игровые активности (например, в GTA RP).
2.  **Классификации** ссылок по типам (например, "Проверка отчётов", "Проведение экзамена", "Новости").
3.  **Назначения баллов** каждой активности при первом добавлении.
4.  **Отслеживания использованных** и **неиспользованных** ссылок.
5.  **Формирования отчётов**, автоматически подбирая минимальное количество *неиспользованных* ссылок, чтобы достичь заданного количества баллов.
6.  **Учета специальных правил**, таких как:
    *   Баллы за "новостные" активности учитываются на 50% при подсчёте итогового отчёта.
    *   Ссылка (активность), равная по стоимости требуемой цели, не может быть использована как *единственный* источник баллов для этой цели.
    *   Баллы "новостных" активностей в отчёте должны составлять 40-60% от общей суммы (если возможно).
7.  **Просмотра статистики** по типам активности и общему количеству баллов.

## Установка и запуск

1.  Убедитесь, что у вас установлен **Python 3.x** (рекомендуется 3.8 или выше).
2.  Убедитесь, что у вас установлены стандартные библиотеки Python: `tkinter`, `json`, `datetime`, `os`, `itertools`.
3.  Сохраните предоставленный код программы в файл с названием `activity_manager_gui.py`.
4.  Запустите программу из командной строки (например, `cmd` или PowerShell):
    ```bash
    python activity_manager_gui.py
    ```
    *Примечание: Как показала практика, могут возникнуть проблемы с `Ctrl+V` в PowerShell. Если стандартные горячие клавиши не работают, рекомендуется использовать командную строку `cmd` или запускать файл двойным кликом.*

## Интерфейс

Программа использует вкладки:

1.  **Добавить Ссылку**: Для добавления новых ссылок.
2.  **Сформировать Отчёт**: Для генерации отчёта с требуемым количеством баллов.
3.  **Статистика**: Для просмотра общей статистики по активностям.

### Верхняя панель статистики

Над вкладками отображается строка с общей информацией:

*   **Баллы: XXX** - Общее количество *потенциальных* баллов (сумма баллов *всех* ссылок, без учёта 50%). Клик для просмотра деталей.
*   **Неисп.: XX** - Количество *неиспользованных* ссылок. Клик для просмотра деталей.
*   **Исп.: XX** - Количество *использованных* ссылок. Клик для просмотра деталей.

### Вкладка "Добавить Ссылку"

*   **Поле ввода "Введите ссылку"**: Введите одну ссылку и нажмите "Добавить" или `Enter`.
*   **Кнопка "Добавить"**: Обрабатывает ссылку из поля ввода.
*   **Текстовая область "Или вставьте несколько ссылок..."**: Вставьте несколько ссылок (по одной в строке) и нажмите "Обработать Блок".
*   **Кнопка "Обработать Блок"**: Обрабатывает все ссылки из текстовой области.

#### При добавлении новой ссылки:

1.  Программа извлекает "НЧС" (Нужную Часть Ссылки) из адреса.
2.  Если НЧС встречается впервые, откроется **диалоговое окно**.
3.  В диалоговом окне укажите:
    *   **Баллы** за *одну* активность с этой НЧС.
    *   **Описание** для удобства (например, "Проверка отчётов у Академии").
    *   Отметьте галочку **"Новостная активность?"**, если баллы за неё должны учитываться на 50% при формировании отчёта.
4.  Нажмите **"OK"**.

#### Контекстное меню:

*   Правый клик в любом поле ввода (`Entry`, `Text`) открывает меню с действиями: "Вырезать", "Копировать", "Вставить", "Выделить всё".

### Вкладка "Сформировать Отчёт"

*   **Поле ввода "Требуемое количество баллов"**: Введите нужное количество баллов.
*   **Кнопка "Сформировать Отчёт"**: Запускает процесс подбора ссылок.
*   **Область "Результат отчёта"**: Показывает подобранные ссылки, итоговую сумму, вклад "новостных" и "обычных" активностей.

#### Процесс формирования отчёта:

1.  Программа ищет *неиспользованные* ссылки.
2.  Подбирает *минимальное количество* ссылок, сумма которых >= требуемой цели.
3.  Учитывает специальные правила (50% для новостей, запрет на "равную цель", соотношение 40-60%).
4.  Выбранные ссылки автоматически помечаются как *использованные*.
5.  Результат отображается в области ниже.

### Вкладка "Статистика"

*   **Кнопка "Обновить"**: Обновляет отображаемую статистику.
*   **Область "Статистика"**: Показывает общую информацию и детализацию по типам активности (баллы, тип, описание, количество всего и неиспользованных ссылок).

## Важные замечания

*   **Хранение данных**: Все данные хранятся в файле `activity_links_gui.json` в той же директории, что и программа. Не удаляйте его, иначе вся история будет потеряна.
*   **Специальные правила**: Правило 50% и соотношения 40-60% применяются *только* при формировании отчёта. При просмотре общей статистики ("Баллы: XXX") используются *полные* стоимости.
*   **Контекстное меню**: Используйте правый клик для доступа к функциям копирования/вставки, если `Ctrl+V` не работает.
*   **Фокус ввода**: Убедитесь, что вы кликнули в нужное поле ввода перед тем, как пытаться ввести или вставить текст.
